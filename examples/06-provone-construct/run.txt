
******************************************* EXAMPLE SETUP ************************************************

# IMPORT SDTL AS JSON-LD

geist destroy --dataset kb --quiet
geist create --dataset kb --quiet 
geist import --format jsonld --file ../data/compute-sdth.jsonld

------------------------------------------- SETUP OUTPUTS ------------------------------------------------



******************************************* EXAMPLE E1 ************************************************

# EXPORT ORIGINAL SDTL AS N-TRIPLES

geist export --format nt --sort

------------------------------------------- E1 OUTPUTS ------------------------------------------------

<http://wholetale.org/program/1119/dataframe/1> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://rdf-vocabulary.ddialliance.org/sdth#Dataframe> .
<http://wholetale.org/program/1119/dataframe/1> <https://rdf-vocabulary.ddialliance.org/sdth#hasName> "df"^^<http://www.w3.org/2001/XMLSchema#string> .
<http://wholetale.org/program/1119/dataframe/1> <https://rdf-vocabulary.ddialliance.org/sdth#includesVariable> <http://wholetale.org/program/1119/variable/1> .
<http://wholetale.org/program/1119/dataframe/1> <https://rdf-vocabulary.ddialliance.org/sdth#includesVariable> <http://wholetale.org/program/1119/variable/2> .
<http://wholetale.org/program/1119/file/1> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://rdf-vocabulary.ddialliance.org/sdth#File> .
<http://wholetale.org/program/1119/file/1> <https://rdf-vocabulary.ddialliance.org/sdth#hasFormat> "csv"^^<http://www.w3.org/2001/XMLSchema#string> .
<http://wholetale.org/program/1119/file/1> <https://rdf-vocabulary.ddialliance.org/sdth#hasName> "inputs/df.csv"^^<http://www.w3.org/2001/XMLSchema#string> .
<http://wholetale.org/program/1119/file/2> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://rdf-vocabulary.ddialliance.org/sdth#File> .
<http://wholetale.org/program/1119/file/2> <https://rdf-vocabulary.ddialliance.org/sdth#hasFormat> "csv"^^<http://www.w3.org/2001/XMLSchema#string> .
<http://wholetale.org/program/1119/file/2> <https://rdf-vocabulary.ddialliance.org/sdth#hasName> "df_updated.csv"^^<http://www.w3.org/2001/XMLSchema#string> .
<http://wholetale.org/program/1119/program/1> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://rdf-vocabulary.ddialliance.org/sdth#Program> .
<http://wholetale.org/program/1119/program/1> <https://rdf-vocabulary.ddialliance.org/sdth#hasProgramStep> <http://wholetale.org/program/1119/step/1> .
<http://wholetale.org/program/1119/program/1> <https://rdf-vocabulary.ddialliance.org/sdth#hasProgramStep> <http://wholetale.org/program/1119/step/8> .
<http://wholetale.org/program/1119/step/1> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://rdf-vocabulary.ddialliance.org/sdth#ProgramStep> .
<http://wholetale.org/program/1119/step/1> <https://rdf-vocabulary.ddialliance.org/sdth#assignsVariable> <http://wholetale.org/program/1119/variable/1> .
<http://wholetale.org/program/1119/step/1> <https://rdf-vocabulary.ddialliance.org/sdth#assignsVariable> <http://wholetale.org/program/1119/variable/2> .
<http://wholetale.org/program/1119/step/1> <https://rdf-vocabulary.ddialliance.org/sdth#hasSourceCode> "df = pd.read_csv('inputs/df.csv')"^^<http://www.w3.org/2001/XMLSchema#string> .
<http://wholetale.org/program/1119/step/1> <https://rdf-vocabulary.ddialliance.org/sdth#loadsFile> <http://wholetale.org/program/1119/file/1> .
<http://wholetale.org/program/1119/step/1> <https://rdf-vocabulary.ddialliance.org/sdth#producesDataframe> <http://wholetale.org/program/1119/dataframe/1> .
<http://wholetale.org/program/1119/step/8> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://rdf-vocabulary.ddialliance.org/sdth#ProgramStep> .
<http://wholetale.org/program/1119/step/8> <https://rdf-vocabulary.ddialliance.org/sdth#consumesDataframe> <http://wholetale.org/program/1119/dataframe/1> .
<http://wholetale.org/program/1119/step/8> <https://rdf-vocabulary.ddialliance.org/sdth#hasSourceCode> "df.to_csv('outputs/df_updated.csv', index=False)"^^<http://www.w3.org/2001/XMLSchema#string> .
<http://wholetale.org/program/1119/step/8> <https://rdf-vocabulary.ddialliance.org/sdth#savesFile> <http://wholetale.org/program/1119/file/2> .
<http://wholetale.org/program/1119/step/8> <https://rdf-vocabulary.ddialliance.org/sdth#usesVariable> <http://wholetale.org/program/1119/variable/1> .
<http://wholetale.org/program/1119/step/8> <https://rdf-vocabulary.ddialliance.org/sdth#usesVariable> <http://wholetale.org/program/1119/variable/2> .
<http://wholetale.org/program/1119/variable/1> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <stdh:Variable> .
<http://wholetale.org/program/1119/variable/1> <https://rdf-vocabulary.ddialliance.org/sdth#hasName> "A"^^<http://www.w3.org/2001/XMLSchema#string> .
<http://wholetale.org/program/1119/variable/2> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://rdf-vocabulary.ddialliance.org/sdth#Variable> .
<http://wholetale.org/program/1119/variable/2> <https://rdf-vocabulary.ddialliance.org/sdth#hasName> "B"^^<http://www.w3.org/2001/XMLSchema#string> .


******************************************* EXAMPLE R1 ************************************************

# CONSTRUCT PROVONE PROGRAMS

(
geist report << '__END_REPORT_TEMPLATE__'

    {{{
        {{ include "../common/sdth.g" }}
    }}}
                                                                                        \
    {{ range $T := (sdth_construct_provone_program_triples | rows) }}                   \
        {{ ntriple_print $T }}
    {{ end }}                                                                                                                                                                   \
__END_REPORT_TEMPLATE__
) | sort

------------------------------------------- R1 OUTPUTS ------------------------------------------------

<http://wholetale.org/program/1119/program/1> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://purl.dataone.org/provone/2015/01/15/ontology#Program> .
<http://wholetale.org/program/1119/step/1> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://purl.dataone.org/provone/2015/01/15/ontology#Program> .
<http://wholetale.org/program/1119/step/8> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://purl.dataone.org/provone/2015/01/15/ontology#Program> .


******************************************* EXAMPLE R2 ************************************************

# CONSTRUCT HASSUBPROGRAM TRIPLES

(
geist report << '__END_REPORT_TEMPLATE__'
    {{{ {{ include "../common/sdth.g" }} }}}

    {{ has_subprogram_triples }}
__END_REPORT_TEMPLATE__
) | sort

------------------------------------------- R2 OUTPUTS ------------------------------------------------


<http://wholetale.org/program/1119/program/1> provone:hasSubProgram <http://wholetale.org/program/1119/step/1> .
<http://wholetale.org/program/1119/program/1> provone:hasSubProgram <http://wholetale.org/program/1119/step/8> .


******************************************* EXAMPLE R3 ************************************************

# CONSTRUCT DATAFRAME PORTS

(
geist report << '__END_REPORT_TEMPLATE__'
    {{{ {{ include "../common/sdth.g" }} }}}

    {{ construct_dataframe_out_ports }}
    {{ construct_dataframe_in_ports }}
__END_REPORT_TEMPLATE__
) | sort

------------------------------------------- R3 OUTPUTS ------------------------------------------------

<http://wholetale.org/program/1119/step/1/dataframeport/df_out> sdth:hasDataframe <http://wholetale.org/program/1119/dataframe/1> .
<http://wholetale.org/program/1119/step/1> provone:hasOutPort <http://wholetale.org/program/1119/step/1/dataframeport/df_out> .
<http://wholetale.org/program/1119/step/8/dataframeport/df_in> sdth:hasDataframe <http://wholetale.org/program/1119/dataframe/1> .
<http://wholetale.org/program/1119/step/8> provone:hasInPort <http://wholetale.org/program/1119/step/8/dataframeport/df_in> .


******************************************* EXAMPLE R4 ************************************************

# CONSTRUCT VARIABLE PORTS

(
geist report << '__END_REPORT_TEMPLATE__'
    {{{ {{ include "../common/sdth.g" }} }}}

    {{ construct_variable_out_ports }}
    {{ construct_variable_in_ports }}
__END_REPORT_TEMPLATE__
) | sort

------------------------------------------- R4 OUTPUTS ------------------------------------------------


<http://wholetale.org/program/1119/step/1/variableport/A_out> sdth:hasVariable <http://wholetale.org/program/1119/variable/1> .
<http://wholetale.org/program/1119/step/1/variableport/B_out> sdth:hasVariable <http://wholetale.org/program/1119/variable/2> .
<http://wholetale.org/program/1119/step/1> provone:hasOutPort <http://wholetale.org/program/1119/step/1/variableport/A_out> .
<http://wholetale.org/program/1119/step/1> provone:hasOutPort <http://wholetale.org/program/1119/step/1/variableport/B_out> .
<http://wholetale.org/program/1119/step/8/variableport/A_in> sdth:hasVariable <http://wholetale.org/program/1119/variable/1> .
<http://wholetale.org/program/1119/step/8/variableport/B_in> sdth:hasVariable <http://wholetale.org/program/1119/variable/2> .
<http://wholetale.org/program/1119/step/8> provone:hasInPort <http://wholetale.org/program/1119/step/8/variableport/A_in> .
<http://wholetale.org/program/1119/step/8> provone:hasInPort <http://wholetale.org/program/1119/step/8/variableport/B_in> .


******************************************* EXAMPLE R5 ************************************************

# CONSTRUCT DATAFRAME CHANNELS

(
geist report << '__END_REPORT_TEMPLATE__'
    {{{ {{ include "../common/sdth.g" }} }}}
 
    {{ construct_dataframe_channels }}
__END_REPORT_TEMPLATE__
) | sort

------------------------------------------- R5 OUTPUTS ------------------------------------------------

<http://wholetale.org/program/1119/step/1/dataframeport/df_out> provone:connectsTo http://wholetale.org/program/1119/step/1/dataframechannel/0 .
<http://wholetale.org/program/1119/step/8/dataframeport/df_in> provone:connectsTo http://wholetale.org/program/1119/step/1/dataframechannel/0 .


******************************************* EXAMPLE R6 ************************************************

# CONSTRUCT VARIABLE CHANNELS

(
geist report << '__END_REPORT_TEMPLATE__'
    {{{ {{ include "../common/sdth.g" }} }}}
 
    {{ construct_variable_channels }}
__END_REPORT_TEMPLATE__
) | sort

------------------------------------------- R6 OUTPUTS ------------------------------------------------

<http://wholetale.org/program/1119/step/1/variableport/A_out> provone:connectsTo http://wholetale.org/program/1119/step/1/variablechannel/0 .
<http://wholetale.org/program/1119/step/1/variableport/B_out> provone:connectsTo http://wholetale.org/program/1119/step/1/variablechannel/1 .
<http://wholetale.org/program/1119/step/8/variableport/A_in> provone:connectsTo http://wholetale.org/program/1119/step/1/variablechannel/0 .
<http://wholetale.org/program/1119/step/8/variableport/B_in> provone:connectsTo http://wholetale.org/program/1119/step/1/variablechannel/1 .

